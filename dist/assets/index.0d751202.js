var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,l=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&c(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&c(e,n,t[n]);return e},i=(e,r)=>t(e,n(r));import{r as s,R as u,a as p}from"./vendor.c828e799.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const m={incomeReceived:void 0,materialCost:void 0,operatingExpensePercentage:void 0,ownerPayPercentage:void 0,profitPercentage:void 0,taxPercentage:void 0,accounts:[],profitRemaining:0,percentageRemaining:100,realRevenue:0,intoProfit:0,intoOwner:0,intoTax:0,intoOperatingExpense:0,intoAccounts:[]};function d(e){var t,n,r,a;const o=100-((null!=(t=e.profitPercentage)?t:0)+(null!=(n=e.ownerPayPercentage)?n:0)+(null!=(r=e.taxPercentage)?r:0)+(null!=(a=e.operatingExpensePercentage)?a:0)+e.accounts.reduce(((e,[,t])=>e+(null!=t?t:0)),0));return i(l({},e),{percentageRemaining:o})}function g(e=0,t=0){return e-t}function E(e,t){var n,r,a,o;switch(t.type){case"SET_INCOME":return i(l({},e),{incomeReceived:t.payload,realRevenue:g(t.payload,e.materialCost)});case"SET_MATERIAL_COST":return i(l({},e),{materialCost:t.payload,realRevenue:g(e.incomeReceived,t.payload)});case"SET_PROFIT_PERCENTAGE":return d(i(l({},e),{profitPercentage:t.payload}));case"SET_OWNER_PAY_PERCENTAGE":return d(i(l({},e),{ownerPayPercentage:t.payload}));case"SET_TAX_PERCENTAGE":return d(i(l({},e),{taxPercentage:t.payload}));case"SET_OPERATING_EXPENSE_PERCENTAGE":return d(i(l({},e),{operatingExpensePercentage:t.payload}));case"SET_ACCOUNTS":return i(l({},e),{accounts:t.payload,intoAccounts:t.payload.map((()=>0))});case"SET_ACCOUNT":return d(i(l({},e),{accounts:e.accounts.map((([e,n])=>e===t.payload[0]?t.payload:[e,n]))}));case"DERIVE_REMAINING_PROFIT":return function(e){const t=e.intoProfit+e.intoOwner+e.intoTax+e.intoOperatingExpense+e.intoAccounts.reduce(((e,t)=>e+(null!=t?t:0)),0),n=e.realRevenue-t;return i(l({},e),{profitRemaining:n})}(i(l({},e),{intoProfit:e.realRevenue*((null!=(n=e.profitPercentage)?n:0)/100),intoOwner:e.realRevenue*((null!=(r=e.ownerPayPercentage)?r:0)/100),intoTax:e.realRevenue*((null!=(a=e.taxPercentage)?a:0)/100),intoOperatingExpense:e.realRevenue*((null!=(o=e.operatingExpensePercentage)?o:0)/100),intoAccounts:e.accounts.map((([,t])=>e.realRevenue*((null!=t?t:0)/100)))}));default:return e}}const f=s.exports.createContext(void 0);function P({children:e,initialState:t}){const[n,r]=s.exports.useReducer(E,t),a=s.exports.useCallback((e=>{r({type:"SET_ACCOUNTS",payload:e.map((e=>[e,void 0]))})}),[]),o=s.exports.useCallback((e=>{const{name:t,value:n}=e.target,a=""!==n?parseFloat(n):void 0;if(t.includes("account-")){const e=parseInt(t.split("-")[1]);return void r({type:"SET_ACCOUNT",payload:[`account-${e}`,a]})}const o=`SET_${t.replace(/-/gi,"_").toUpperCase()}`;r({type:o,payload:a})}),[]),{incomeReceived:c,materialCost:l,operatingExpensePercentage:i,ownerPayPercentage:p,profitPercentage:m,taxPercentage:d,accounts:g}=n;s.exports.useEffect((()=>{void 0!==c&&void 0!==l&&void 0!==i&&void 0!==p&&void 0!==m&&void 0!==d&&g.some((e=>void 0!==e[1]))&&r({type:"DERIVE_REMAINING_PROFIT"})}),[c,l,i,p,m,d,g]);const P=s.exports.useMemo((()=>[n,{handleChange:o,setAccounts:a}]),[n,o,a]);return u.createElement(f.Provider,{value:P},e)}function y(){const e=s.exports.useContext(f);if(void 0===e)throw new Error("useProfitCalculator was called outside of ProfitCalculator context");return e}const v={income:"incomeReceived","material-cost":"materialCost","profit-percentage":"profitPercentage","owner-pay-percentage":"ownerPayPercentage","tax-percentage":"taxPercentage","operating-expense-percentage":"operatingExpensePercentage"};function x(e){const[t,{handleChange:n}]=y();return u.createElement(u.Fragment,null,e.label&&u.createElement("label",{htmlFor:e.name,className:"profit-calculator__field-label"+(e.labelClassName?` ${e.labelClassName}`:"")},e.label),u.createElement("input",{type:"text",className:"profit-calculator__field-input"+(e.className?` ${e.className}`:""),name:e.name,placeholder:e.placeholder,value:t[v[e.name]],onChange:n}))}function R({name:e}){const[t]=y();if(e.includes(".")){const[n,r]=e.split("."),a=t[n];return u.createElement(u.Fragment,null,JSON.stringify(a[parseInt(r)-1]))}return u.createElement(u.Fragment,null,JSON.stringify(t[e]))}function C(e,t){const n=document.getElementById(t);return n?p.createPortal(e,n):null}const O=(e,t)=>t?e(t[1],t[0]):null,T=e=>(t,n)=>C(u.createElement(x,i(l({},t),{name:e})),n);function N(e){var t,n;const r=()=>O(T("income"),e.income),a=()=>O(T("material-cost"),e.materialCost),o=()=>O(T("profit-percentage"),e.profitPercentage),c=()=>O(T("owner-pay-percentage"),e.ownerPayPercentage),i=()=>O(T("tax-percentage"),e.taxPercentage),p=()=>O(T("operating-expense-percentage"),e.operatingExpensePercentage),m=()=>{var t,n;const[{accounts:r},{setAccounts:a}]=y();return s.exports.useEffect((()=>{e.accounts&&0===r.length&&a(e.accounts.map((e=>e[0])))}),[a,r,e]),u.createElement(u.Fragment,null,null!=(n=null==(t=e.accounts)?void 0:t.map(((e,t)=>C(u.createElement(x,l({name:`account-${t+1}`,key:`account-${t+1}`},e[1])),e[0]))))?n:null)};return u.createElement(u.Fragment,null,u.createElement(r,null),u.createElement(a,null),u.createElement(o,null),u.createElement(c,null),u.createElement(i,null),u.createElement(p,null),u.createElement(m,null),null!=(n=null==(t=e.observers)?void 0:t.map((e=>{return O((t=e[0],(e,n)=>C(u.createElement(R,l({key:t},e)),n)),e);var t})))?n:null)}window.profitCalculator=(e="root",t)=>p.render(u.createElement(u.StrictMode,null,u.createElement(P,{initialState:m},u.createElement(N,l({},t)))),document.getElementById(e));
