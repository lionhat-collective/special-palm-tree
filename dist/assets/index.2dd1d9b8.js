var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,l=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&c(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&c(e,n,t[n]);return e},i=(e,r)=>t(e,n(r));import{r as u,R as s,a as p}from"./vendor.c828e799.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const m={incomeReceived:void 0,materialCost:void 0,operatingExpensePercentage:void 0,ownerPayPercentage:void 0,profitPercentage:void 0,taxPercentage:void 0,accounts:[],profitRemaining:0,percentageRemaining:100,realRevenue:0,intoProfit:0,intoOwner:0,intoTax:0,intoOperatingExpense:0,intoAccounts:[]};function g(e){var t,n,r,a;const o=100-((null!=(t=e.profitPercentage)?t:0)+(null!=(n=e.ownerPayPercentage)?n:0)+(null!=(r=e.taxPercentage)?r:0)+(null!=(a=e.operatingExpensePercentage)?a:0)+e.accounts.reduce(((e,[,t])=>e+(null!=t?t:0)),0));return i(l({},e),{percentageRemaining:o})}function d(e=0,t=0){return e-t}function E(e,t){var n,r,a,o;switch(t.type){case"SET_INCOME":return i(l({},e),{incomeReceived:t.payload,realRevenue:d(t.payload,e.materialCost)});case"SET_MATERIAL_COST":return i(l({},e),{materialCost:t.payload,realRevenue:d(e.incomeReceived,t.payload)});case"SET_PROFIT_PERCENTAGE":return g(i(l({},e),{profitPercentage:t.payload}));case"SET_OWNER_PAY_PERCENTAGE":return g(i(l({},e),{ownerPayPercentage:t.payload}));case"SET_TAX_PERCENTAGE":return g(i(l({},e),{taxPercentage:t.payload}));case"SET_OPERATING_EXPENSE_PERCENTAGE":return g(i(l({},e),{operatingExpensePercentage:t.payload}));case"SET_ACCOUNTS":return i(l({},e),{accounts:t.payload});case"SET_ACCOUNT":return g(i(l({},e),{accounts:e.accounts.map((([e,n])=>e===t.payload[0]?t.payload:[e,n]))}));case"DERIVE_REMAINING_PROFIT":return function(e){const t=e.intoProfit+e.intoOwner+e.intoTax+e.intoOperatingExpense+e.intoAccounts.reduce(((e,t)=>e+(null!=t?t:0)),0),n=e.realRevenue-t;return i(l({},e),{profitRemaining:n})}(i(l({},e),{intoProfit:e.realRevenue*((null!=(n=e.profitPercentage)?n:0)/100),intoOwner:e.realRevenue*((null!=(r=e.ownerPayPercentage)?r:0)/100),intoTax:e.realRevenue*((null!=(a=e.taxPercentage)?a:0)/100),intoOperatingExpense:e.realRevenue*((null!=(o=e.operatingExpensePercentage)?o:0)/100),intoAccounts:e.accounts.map((([,t])=>e.realRevenue*((null!=t?t:0)/100)))}));default:return e}}const f=u.exports.createContext(void 0);function P({children:e,initialState:t}){const[n,r]=u.exports.useReducer(E,t),a=u.exports.useCallback((e=>{r({type:"SET_ACCOUNTS",payload:e.map((e=>[e,void 0]))})}),[]),o=u.exports.useCallback((e=>{const{name:t,value:n}=e.target,a=""!==n?parseFloat(n):void 0;if(t.includes("account-")){const e=parseInt(t.split("-")[1]);return void r({type:"SET_ACCOUNT",payload:[`account-${e}`,a]})}const o=`SET_${t.replace(/-/gi,"_").toUpperCase()}`;r({type:o,payload:a})}),[]);u.exports.useEffect((()=>{0===n.percentageRemaining&&0===n.profitRemaining&&0!==n.realRevenue&&r({type:"DERIVE_REMAINING_PROFIT"})}),[n]),console.log({state:n});const c=u.exports.useMemo((()=>[n,{handleChange:o,setAccounts:a}]),[n,o,a]);return s.createElement(f.Provider,{value:c},e)}function y(){const e=u.exports.useContext(f);if(void 0===e)throw new Error("useProfitCalculator was called outside of ProfitCalculator context");return e}const v={income:"incomeReceived","material-cost":"materialCost","profit-percentage":"profitPercentage","owner-pay-percentage":"ownerPayPercentage","tax-percentage":"taxPercentage","operating-expense-percentage":"operatingExpensePercentage"};function R(e){const[t,{handleChange:n}]=y();return s.createElement(s.Fragment,null,e.label&&s.createElement("label",{htmlFor:e.name,className:"profit-calculator__field-label"+(e.labelClassName?` ${e.labelClassName}`:"")},e.label),s.createElement("input",{type:"text",className:"profit-calculator__field-input"+(e.className?` ${e.className}`:""),name:e.name,placeholder:e.placeholder,value:t[v[e.name]],onChange:n}))}function x({name:e}){const[t]=y();return console.log(t[e],e),s.createElement(s.Fragment,null,JSON.stringify(t[e]))}function C(e,t){const n=document.getElementById(t);return n?p.createPortal(e,n):null}const T=(e,t)=>t?e(t[1],t[0]):null,O=e=>(t,n)=>C(s.createElement(R,i(l({},t),{name:e})),n);function _(e){var t,n;const r=()=>T(O("income"),e.income),a=()=>T(O("material-cost"),e.materialCost),o=()=>T(O("profit-percentage"),e.profitPercentage),c=()=>T(O("owner-pay-percentage"),e.ownerPayPercentage),i=()=>T(O("tax-percentage"),e.taxPercentage),p=()=>T(O("operating-expense-percentage"),e.operatingExpensePercentage),m=()=>{var t,n;const[{accounts:r},{setAccounts:a}]=y();return u.exports.useEffect((()=>{e.accounts&&0===r.length&&a(e.accounts.map((e=>e[0])))}),[a,r,e]),s.createElement(s.Fragment,null,null!=(n=null==(t=e.accounts)?void 0:t.map(((e,t)=>C(s.createElement(R,l({name:`account-${t+1}`,key:`account-${t+1}`},e[1])),e[0]))))?n:null)};return s.createElement(s.Fragment,null,s.createElement(r,null),s.createElement(a,null),s.createElement(o,null),s.createElement(c,null),s.createElement(i,null),s.createElement(p,null),s.createElement(m,null),null!=(n=null==(t=e.observers)?void 0:t.map((e=>{return T((t=e[0],(e,n)=>C(s.createElement(x,l({key:t},e)),n)),e);var t})))?n:null)}window.profitCalculator=(e="root",t)=>p.render(s.createElement(s.StrictMode,null,s.createElement(P,{initialState:m},s.createElement(_,l({},t)))),document.getElementById(e));
